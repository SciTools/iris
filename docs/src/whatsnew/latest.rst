.. include:: ../common_links.inc

|iris_version| |build_date| [unreleased]
****************************************

This document explains the changes made to Iris for this release
(:doc:`View all changes <index>`.)


.. dropdown:: |iris_version| Release Highlights
   :color: primary
   :icon: info
   :animate: fade-in
   :open:

   The highlights for this major/minor release of Iris include:

   * N/A

   And finally, get in touch with us on :issue:`GitHub<new/choose>` if you have
   any issues or feature requests for improving Iris. Enjoy!


üì¢ Announcements
================

#. `@bjlittle`_ migrated the ``SciTools`` social community from ``X`` (formally ``Twitter``)
   to `Bluesky <https://bsky.app/profile/scitools.bsky.social>`__ ü¶ã. (:pull:`6237`)


‚ú® Features
===========

#. `@trexfeathers`_ and `@ukmo-ccbunney`_ extended the
   :data:`iris.loading.LOAD_PROBLEMS` capturing to *all* NetCDF objects that are
   added to a :class:`~iris.cube.Cube` during loading, as well as a selection
   of other objects such as :class:`~iris.coord_systems.CoordSystem`. Note this
   includes an improvement to how :class:`~iris.coords.DimCoord` is 'gracefully'
   converted to :class:`~iris.coords.AuxCoord` if it is masked - the mask is
   now preserved when it was not previously. See also: :ref:`load-problems`.
   (:pull:`6465`, :pull:`6529`)

#. `@wjbenfold`_ and `@trexfeathers`_ added ``crs_wkt`` to the attributes when
   saving a :class:`~iris.coord_systems.CoordSystem` to a NetCDF file. Note that
   ``crs_wkt`` is considered *supplementary* by the CF conventions, with
   ``grid_mapping`` being the primary source of information, and ``crs_wkt`` not
   expected to contain conflicting information. Because of this, Iris generates
   :class:`~iris.coord_systems.CoordSystem` exclusively from ``grid_mapping``
   when loading, and writes a fresh ``crs_wkt`` whenever a
   :class:`~iris.coord_systems.CoordSystem` is saved. If your use case goes
   beyond the CF conventions, you can modify the save and load process for your
   needs by using the `Ncdata`_ package.
   See `CRS WKT in the CF Conventions`_ for more. (:issue:`3796`, :pull:`6519`)

#. `@ukmo-ccbunney`_ and `@trexfeathers`_ added support for
    **multiple coordinate systems** and **ordered coordinates** when loading
    and saving NetCDF files.
    This allows for coordinates to be explicitly associated with a coordinate
    system via an extended syntax in the ``grid_mapping`` attribute of a NetCDF
    data variable. This extended syntax also supports specification of multiple
    coordinate systems per data variable. Setting the property
    ``cube.extended_grid_mapping = True`` will enable extended grid mapping
    syntax when saving a NetCDF file and also generate an associated **well known
    text** attribute (``crs_wkt``; as described in :issue:`3796`).
    See `CRS Grid Mappings and Projections`_ for more information.
    (:issue:3388:, :pull:6536:)


üêõ Bugs Fixed
=============

#. `@HGWright`_ added a new warning to inform users that the boolean coordinate generated by
   :meth:`iris.coord_categorisation.add_season_membership` is not saveable to netcdf. (:pull:`6305`)

#. `@bouweandela`_ changed the ``convert_units`` method on cubes and coordinates
   so it also converts the values of the attributes ``"actual_range"``,
   ``"valid_max"``, ``"valid_min"``, and ``"valid_range"``. (:pull:`6416`)

#. `@ukmo-ccbunney`_ fixed loading and merging of masked data in scalar ``AuxCoords``.
   (:issue:`3584`, :pull:`6468`)

#. `@stephenworsley`_ fixed the html representation of cubes in Jupyter when coordinates
   share the same name. (:pull:`6476`)

#. `@schlunma`_ fixed loading of netCDF files with coordinates that have
   non-string units. (:issue:`6505`, :pull:`6506`)

#. `@ukmo-ccbunney`_ correctly set the ``bplon`` PP field parameter when saving
   a cube defined on Limited Area Model (LAM) grid to PP format. Activate this
   behaviour with the new Futures flag ``iris.FUTURE.lam_pole_offset=True``.
   (:issue:`3560`, :pull:`6520`)

#. `@stephenworsley`_ fixed incompatibilities with numpy v2.3 affecting arrays of dates and
   array printing. (:pull:`6518`)

#. `@stephenworsley`_ fixed a bug which caused :meth:`~iris.cube.CubeList.concatenate_cube`
   to fail when concatenating over multiple axes. (:pull:`6533`)


üí£ Incompatible Changes
=======================

#. N/A

üöÄ Performance Enhancements
===========================

#. N/A


üî• Deprecations
===============

#. N/A


üîó Dependencies
===============

#. N/A


üìö Documentation
================

#. `@trexfeathers`_ and `@ukmo-ccbunney`_ added :ref:`load-problems` to the user
   guide. (:pull:`6529`)

#. `@trexfeathers`_ and `@ukmo-ccbunney`_ added a new user guide page:
   :ref:`iris-philosophy`, for readers who are interested in why Iris is
   designed/maintained the way it is. Initial content: :ref:`code-maintenance`,
   :ref:`load-problems-explanation`, :ref:`filtering-warnings-explanation`.
   (:pull:`6529`)


üíº Internal
===========

#. `@pp-mo`_ replaced the PR-based linkchecks with a daily scheduled link checker based
   on `lychee <https://github.com/lycheeverse/lychee-action>`__.
   (:issue:`4140`, :pull:`6386`)

#. `@trexfeathers`_ added a CI workflow to quickly validate that the
   benchmarking setup is still working. (:pull:`6496`)

#. `@trexfeathers`_ improved the stack trace for errors that occur during
   benchmark data generation, showing developers the root problem at-a-glance
   without needing local replication. (:pull:`6524`)


.. comment
    Whatsnew author names (@github name) in alphabetical order. Note that,
    core dev names are automatically included by the common_links.inc:




.. comment
    Whatsnew resources in alphabetical order:

.. _CRS WKT in the CF Conventions: https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#use-of-the-crs-well-known-text-format
.. _CRS Grid Mappings and Projections: https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#grid-mappings-and-projections
.. _Ncdata: https://github.com/pp-mo/ncdata
